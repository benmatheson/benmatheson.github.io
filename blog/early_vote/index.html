<!DOCTYPE html>
<html lang="en-US">
    <head>
        

        <title>
            
            
                Alaska 2020 Early Vote Tracker - Rmarkdown report | Ben Matheson
            
        </title>

        <meta name="title" content="Alaska 2020 Early Vote Tracker - Rmarkdown report | Ben Matheson">

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="referrer" content="no-referrer-when-downgrade">
        <meta name="generator" content="">
        <base href="https://benmatheson.github.io/">
        <meta name="description" content="Ben Matheson, Anchorage, Alaska. Web, Radio, etc.">
        
        <meta name="author" content="Ben Matheson">
        
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@benmatheson">
        <meta name="twitter:creator" content="@benmatheson">
        
        <meta property="og:title" content="Alaska 2020 Early Vote Tracker - Rmarkdown report | Ben Matheson">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://benmatheson.github.io/">
        <meta property="og:image" content="https://benmatheson.github.io//images/osprey.png">
        <meta property="og:description" content="Ben Matheson, Anchorage, Alaska. Web, Radio, etc.">
        

        
        <link rel="apple-touch-icon" sizes="57x57" href="https://benmatheson.github.io/images/logo/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="https://benmatheson.github.io/images/logo/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="https://benmatheson.github.io/images/logo/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="https://benmatheson.github.io/images/logo/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="https://benmatheson.github.io/images/logo/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="https://benmatheson.github.io/images/logo/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="https://benmatheson.github.io/images/logo/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="https://benmatheson.github.io/images/logo/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="https://benmatheson.github.io/images/logo/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="images/logo/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://benmatheson.github.io/images/logo/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="https://benmatheson.github.io/images/logo/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://benmatheson.github.io/images/logo/favicon-16x16.png">
        <link rel="manifest" href="images/logo/manifest.json">
        <meta name="msapplication-TileColor" content="#FFF">
        <meta name="msapplication-TileImage" content="/images/logo/ms-icon-144x144.png">
        <meta name="theme-color" content="#FFF">
        

        <link rel="canonical" href="https://benmatheson.github.io/blog/early_vote/">
        
        <link rel="stylesheet" href="styles/main.css" type="text/css">
        <style>

@import url('https://fonts.googleapis.com/css?family=IBM+Plex+Mono:400,400i|IBM+Plex+Sans+Condensed:400,400i|IBM+Plex+Sans:100,100i,400,400i,700,700i|IBM+Plex+Serif:400,400i');

@import url('https://fonts.googleapis.com/css?family=Roboto+Slab:700|Source+Serif+Pro');
@import url('https://fonts.googleapis.com/css2?family=Source+Serif+Pro:wght@300;400&display=swap');
  nav {
    box-shadow: none;
  }


  nav {

position: relative;
top:21;
  }

header img {


	max-height: 16rem;
}

header {
 

}

.nav-fixed {

	bottom: 50%;
}




.blog {

background-color: red;
background-color: #ffffff;
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23e3e6e7' fill-opacity='0.4'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
 


 
opacity: 0.99;
background-image:  radial-gradient(#0077e0 0.5px, transparent 0.5px), radial-gradient(#0077e0 0.5px, #fcfeff 0.5px);
background-size: 20px 20px;
background-position: 0 0,10px 10px;




}

article{

box-shadow: 0px 2px 7px 0px rgba(0,0,0,.12);
padding-bottom: 7px;
padding-top: 9px;

border-radius: 8px;
margin-top: 7%;
padding-left: 5%;
padding-right: 5%;

background-color: #ffffff;


}

article:hover {


 
transform: scale(1.03);
   
transition: all ease .1s;

}


div.col-xs-12 h1

{ 
  	
	font-family: "IBM Plex Sans", sans-serif;
   	font-size: 4rem;   
    font-weight: 800;	
   }



h1 {
  font-family: "IBM Plex Sans", "Open Sans", sans-serif; 
      font-weight: 800; 
       
      color:#333333;
      line-height: 99%;
      margin-bottom: 1%;


}
 div.sub-header


{ 
  	
	font-family: "IBM Plex Sans", "Open Sans", sans-serif; 
      font-weight: 100; 
      font-style: italic;
      color:#333333;
      margin-bottom: 1%;
 	
   }

.gallery img {
padding: 1rem;

}
 


p > a {
 font-family: "Source Serif Pro";
   
  text-decoration: underline;
}





h3 a { 
  	
   	 
   	 
   	font-family: "Source Serif Pro", sans-serif;
 
    letter-spacing: .2rem;

     
    padding: 2px;
     
     
text-transform: none;
font-weight: 900;

   } 

h2 {
	font-family: "IBM Plex Sans", "Open Sans", sans-serif; 

  font-weight: 800;
  line-height: 97%;
   
    display: inline-block;

    border-bottom: 9px solid  #fff ;
    border-top: 9px solid  #fff ;
    transition: .1s all;


}
h2:hover {

   
   
   
   
   
  
  
  
 
  display: inline-block;
   

  

}

h2 > a:hover{


  text-decoration: underline;
 
transition: all  .1s;

}
 
a:hover {
     color: #1a2f51;
     color: rgb(252, 94, 76);

     

   }
   .content a:hover {
    color: #1a2f51;
   	 
     color: black;

     border-bottom: 4px solid rgb(252, 94, 76);

   }

   .content a {
   	  




   }

li {    
  
   
     	font-family: "Source Serif Pro", sans-serif;

 
}




   p {
    font-family: "IBM Plex Sans", serif;
   	font-family: "IBM Plex Sans", sans-serif;
   	 
   	font-family: "Source Serif Pro", sans-serif;
     
    line-height: 120%;
    font-weight: 500;
    font-weight: 400;
    color: rgb(100, 100, 100);
     
     

   }



.overlay h2{

font-family: "IBM Plex Mono", sans-serif;
border:none;
   

}



.overlay{

  font-family: "IBM Plex Mono", sans-serif;
   


}
div.row.middle-xs.center-xs.overlay:hover {

border: 1px dashed gray;
opacity: 40;
 
background-color: rgba(0,0,0,.9);
 
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%2363fec4' fill-opacity='0.13'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");

}

p.summ {

padding-right: 5%;
margin-top: 0;
 
font-size: 1.01rem;
line-height: 1.27rem;
font-family: "IBM Plex Mono", sans-serif;
font-family: "IBM Plex Sans", sans-serif;
 
font-weight: 400;
}


h3 a:hover{

 
font-weight: 600;
font-weight: 900;
     
     

transition: all ease-in .1s;
 
background-color: #ffffff;
 
 
 
border-bottom: 4px solid salmon;
border-bottom: 4px solid rgb(252, 94, 76);
 
color: black;

}

.overlay h2:hover{

border-bottom: none;
   

}


.about {


  
 
 
 

 

 

 


 
 
 


 
 
 

 
 
 






 
  */

 



  
 
 
 

 
 
 
 
 



 



background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='100%25' width='100%25'%3E%3Cdefs%3E%3Cpattern id='doodad' width='150' height='150' viewBox='0 0 40 40' patternUnits='userSpaceOnUse' patternTransform='rotate(241)'%3E%3Crect width='100%25' height='100%25' fill='rgba(43, 108, 176,1)'/%3E%3Ccircle cx='20' cy='20' r='7' fill='rgba(229, 62, 62,1)' filter='url(%23filter-doodad-1)'/%3E%3Ccircle cx='40' cy='20' r='11' fill='rgba(229, 62, 62,1)' filter='url(%23filter-doodad-1)'/%3E%3Ccircle cx='0' cy='20' r='11' fill='rgba(229, 62, 62,1)' filter='url(%23filter-doodad-1)'/%3E%3Cpath d='M 20 12a 8 8 0 0 0 0 16a 8 8 0 0 0 0-16zM-10-10h 60v 60h-60z' fill='rgba(247, 250, 252,1)' filter='url(%23filter-doodad-2)'/%3E%3C/pattern%3E%3Cfilter id='filter-doodad-1'%3E%3CfeTurbulence baseFrequency='0.5 0.01' numOctaves='2' result='result1'/%3E%3CfeDisplacementMap in2='result1' scale='16' result='result2' xChannelSelector='R' yChannelSelector='G' in='SourceGraphic'/%3E%3CfeComposite in2='result2' in='SourceGraphic' operator='atop' result='compositeGraphic'/%3E%3CfeOffset in='compositeGraphic' result='fbSourceGraphic' dy='-1.6'/%3E%3C/filter%3E%3Cfilter id='filter-doodad-2'%3E%3CfeTurbulence baseFrequency='0.25 0.01' numOctaves='2' result='result1'/%3E%3CfeDisplacementMap in2='result1' scale='20' result='result2' xChannelSelector='R' yChannelSelector='G' in='SourceGraphic'/%3E%3CfeComposite in2='result2' in='SourceGraphic' operator='atop' result='compositeGraphic'/%3E%3CfeOffset in='compositeGraphic' result='fbSourceGraphic' dy='-2'/%3E%3C/filter%3E%3C/defs%3E%3Crect fill='url(%23doodad)' height='200%25' width='200%25'/%3E%3C/svg%3E ");

background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='100%25' width='100%25'%3E%3Cdefs%3E%3Cpattern id='doodad' width='239' height='239' viewBox='0 0 40 40' patternUnits='userSpaceOnUse' patternTransform='rotate(237)'%3E%3Crect width='100%25' height='100%25' fill='rgba(249, 249, 245,1)'/%3E%3Cpath d='M0 20v20l10-20L20 0l-20 20zM20 20v20l10-20L40 0l-20 20z' fill='rgba(229, 62, 62,1)' filter='url(%23filter-doodad-1)'/%3E%3Cpath d='M0 40v-20l20-20l-14 20zM20 40v-20l20-20l-14 20zM20 20v20l-20 20l20-20zM20-20v20l-20 20l20-20zM40 20v20l-20 20l20-20zM40-20v20l-20 20l20-20z' fill='rgba(43, 108, 176,1)' filter='url(%23filter-doodad-2)'/%3E%3C/pattern%3E%3Cfilter id='filter-doodad-1'%3E%3CfeTurbulence baseFrequency='0.01 0.7' numOctaves='2' result='result1'/%3E%3CfeDisplacementMap in2='result1' scale='17' result='result2' xChannelSelector='R' yChannelSelector='G' in='SourceGraphic'/%3E%3CfeComposite in2='result2' in='SourceGraphic' operator='atop' result='compositeGraphic'/%3E%3CfeOffset in='compositeGraphic' result='fbSourceGraphic' dx='-1.7'/%3E%3C/filter%3E%3Cfilter id='filter-doodad-2'%3E%3CfeTurbulence baseFrequency='0.75 0.01' numOctaves='2' result='result1'/%3E%3CfeDisplacementMap in2='result1' scale='20' result='result2' xChannelSelector='R' yChannelSelector='G' in='SourceGraphic'/%3E%3CfeComposite in2='result2' in='SourceGraphic' operator='atop' result='compositeGraphic'/%3E%3CfeOffset in='compositeGraphic' result='fbSourceGraphic' dy='-2'/%3E%3C/filter%3E%3C/defs%3E%3Crect fill='url(%23doodad)' height='200%25' width='200%25'/%3E%3C/svg%3E ")


}


#about {
  font-size: .9em;
  line-height: 90%;
 
}

#about p {

   
  background-color: white;
   
  padding: 4%;
  box-shadow: rgb(50 50 93 / 15%) 0px 2px 5px -1px, rgb(0 0 0 / 20%) 0px 1px 3px -1px;
border-radius: 4px;

box-shadow: 0 2px 4px rgb(0 0 0 / 10%), 0 8px 16px rgb(0 0 0 / 10%);

color:rgb(44, 44, 44);




}

#about a {

 
 

}

#about div.row {

}

.container middle-xs{
padding: 0px;

}




.visible {
   


}


nav div:not(:first-child):not(:last-child){
 


}
</style>
        
        
        
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-104523061-1', 'auto');
ga('send', 'pageview');
</script>

   



        
      
      
      <link rel="stylesheet"
     href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/stackoverflow-light.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js" charset="utf-8"></script>
<script>console.log("hi from the header")

</script>
        <script>hljs.initHighlightingOnLoad();</script>

   
    </head>

    <body>
        

        

        <nav class="row middle-xs center-xs" >
            <div class="col-xs-6 col-sm-1 logo">
                <a href="https://benmatheson.github.io/"><img src="https://benmatheson.github.io/images/b3.jpg" alt="Ben Matheson"></a>
            </div>
            
            <div class="col-xs-3 col-sm-2"><h3><a href="https://benmatheson.github.io/#about">About</a></h3></div>
            
            <div class="col-xs-3 col-sm-2"><h3><a href="https://benmatheson.github.io/#work">Projects</a></h3></div>
            
            <div class="col-xs-3 col-sm-2"><h3><a href="https://benmatheson.github.io/#blog">Writing</a></h3></div>
            
            <div class="col-xs-6 col-sm-1 nav-toggle">
                <a href="" class="nav-icon" onclick="return false"><img src="https://benmatheson.github.io/images/icon-menu.png" alt="Open Menu"><img src="https://benmatheson.github.io/images/icon-x.png" alt="Close Menu" style="display: none;"></a>
            </div>
        </nav>
        <section class="nav-full row middle-xs center-xs">
            <div class="col-xs-12">
                <div class="row middle-xs center-xs">
                    
                    <div class="col-xs-12"><h1><a href="https://benmatheson.github.io/#about">About</a></h1></div>
                    
                    <div class="col-xs-12"><h1><a href="https://benmatheson.github.io/#work">Projects</a></h1></div>
                    
                    <div class="col-xs-12"><h1><a href="https://benmatheson.github.io/#blog">Writing</a></h1></div>
                    
                </div>
            </div>
        </section>
        <main>


    <section class="container">
        <section class="content">
            <h1> Alaska 2020 Early Vote Tracker - Rmarkdown report </h1>

            <div class="sub-header">
                January 2021 · 6 minute read
            </div>

            <div class="entry-content">
                <p>**<em>TL:DR, I made an rmarkdown site <a href="https://benmatheson.github.io/alaska_2020_early_absentee_vote/early_vote_md.html">tracking Alaska&rsquo;s early and mail vote</a> as ballots arrived each day in October/November 2020.</em></p>

<p>Alaskans voted by mail in record numbers during the 2020/pandemic general election. In mid-October after I mailed in my ballot, I started poking around the Alaska Division of Elections website to see if they had any reports on the incoming ballots. I found a <a href="https://www.elections.alaska.gov/results/20GENR/data/sovc/CombinedBallotCountReport_Server.pdf">daily updated PDF</a> of mail votes, early votes, rejected ballots, and the ballots outstanding.</p>

<p><img src="images/early_vote/pdf1.png" alt="plot1" /></p>

<p>Though it&rsquo;s in a PDF, this was the data I was looking for. While the Division of Elections emails out a full updated voter file quite frequently that&rsquo;s very granular and tracks things like party registration, I wanted to use a dataset that was machine-readable on the web. And the resolution down to actual voters was a little too much for what I wanted to track, which was:</p>

<p><em>What areas of the state are  most enthusiastically particpating in vote-by-mail? Which are not taking part? What areas are seeing the most rejected ballots?</em></p>

<p>This Alaska House District-level data is locked in the PDF above, but it seemed organized and consistent. I wanted to see if I could break this data out of the PDF and show it how I wanted to see it. Like all of my side projects, it&rsquo;s made for an audeince of one: me. If anyone else enjoys it, that&rsquo;s a bonus.</p>

<p>My go-to tool for parsing PDFs is <a href="https://tabula.technology/">Tabula</a>. It&rsquo;s what parses the 208-page pdf for my <a href="http://twitter.com/pfdbot">pfdBot twitterbot</a>. Thus I hoped to use the R package <a href="https://cran.r-project.org/web/packages/tabulizer/vignettes/tabulizer.html">Tabulizer</a> and have all of this run in an rscript or rmarkdown report. For the life of me, I could not get its rJava dependency installed on my laptop. I went deep, deep, deep into StackOverflow topics from 10 years ago. I installed many version of Java. I signed up for the Oracle newsletter I think. Many hours went into attempting that.</p>

<p>My workaround was to use the <a href="https://tabula-py.readthedocs.io/en/latest/">Tabula-py</a> python library for the PDF parsing, and R for the rest. I had one python script that would download the PDF from the Divison of Elections, compare it&rsquo;s update date to the latest date I had saved in a file, and if it was new, then it would use a tabula function to parse and spit out a CSV.</p>

<pre><code class="language-python">
url = &quot;https://www.elections.alaska.gov/results/20GENR/data/sovc/CombinedBallotCountReport_Server.pdf&quot;

tabula.convert_into(url, &quot;output_current.csv&quot;, output_format=&quot;csv&quot;, pages='all')

</code></pre>

<p>With some projects, the hard parts are easy and the easy parts are hard. This is one of those projects. After running the PDF through tabula-py, I got something that looked like this:</p>

<p><img src="images/early_vote/csv1.png" alt="plot1" /></p>

<p>Much better. That one line of python is fantastic. After a bunch of reshaping and adding in new fields like percentages in R with dyplyr, I had the base data for the rmarkdown report.  It was not a pretty system but it worked for the three or four weeks that this was running.</p>

<p>I had been using <a href="https://rmarkdown.rstudio.com/">Rmarkdown</a> to run a handful of reports with COVID-19 information at work, and this seemed like a really nice fit for rmarkdown reports. Load in new data each day, run it, and push to the web.</p>

<p>This is the <a href="https://benmatheson.github.io/alaska_2020_early_absentee_vote/early_vote_md.html">final product</a>.</p>

<p>The ggplot thoroughout was pretty basic, though getting the details right is the time-consuming part. I wanted to show all 40 districts at once, so it&rsquo;s a bit dense, but this is what I wanted.</p>

<p><img src="images/early_vote/hd_2016_status.png" alt="plot1" /></p>

<p>Alaska&rsquo;s 40 House districts cover all the diversity of the state..from the ferry-connected towns in Southeast to the exurban Mat-Su and all the  I wanted to add one level of geographic categorization. It&rsquo;s not intuitive to know that HD33 represents downtown Juneau while HD32 covers Kodiak. So I made up six regional designations, show in the colors of the bars below. These are made up out of thin air.</p>

<p><img src="images/early_vote/hd_2016_turnout.png" alt="plot1" /></p>

<p>I wanted to show how different the voting landscape was across the state. Vote by mail was far less utilized in rural parts of the state in the west and north compared to urban Anchorage districts. Less than 10% of the 2016-level turnout voted by mail in the west and north, while you see in that mass of light blue bars that nine Anchorage districts were at ~40%.</p>

<p>I was at a couple points really close to making a map to show the regional trends, but I decided against it. The world has enough election maps.</p>

<p>The in-person early vote also saw a huge particpation this year. But it was the Juneau Mendenhall Valley (the &ldquo;conservative&rdquo; part of Juneau - shown in green) as well as the Mat-Su districts (shown in red-purple) that really outperfomred with early in-person.</p>

<p><img src="images/early_vote/hd_participation.png" alt="plot1" /></p>

<p>I brought in some historical data to make the raw numbers a bit more meaningful. I grabbed 2016 vote turnout numbers as well as the Trump-Clinton margin for a partisan measurement. Would redder parts of Alaska follow the national trend and skip the mail voting? (the answer: yes, but with the big exception of HD-38,HD-39, and HD-40 the bush districts).</p>

<p><img src="images/early_vote/hd_2016_partisan.png" alt="plot1" /></p>

<p>The couple of scatter plots comparing voter registration and vote-by-mail aren&rsquo;t exactly thrilling, but it was useful for day-to-day on-the-fly exploratory data analysis. You can see the same regional trends pop out, though labelling is hard. I wanted to include all 40 labels. If I was doing something for a real presentation, I&rsquo;d be a lot more selective on what&rsquo;s labelled and how.</p>

<p><img src="images/early_vote/hd_2016_reg_voters.png" alt="plot1" /></p>

<p>I had a lot of fun making a table using the gt pacakge. I&rsquo;d like to do a lot more with it.</p>

<p><img src="images/early_vote/table.png" alt="plot1" /></p>

<p>This looked something like this:</p>

<pre><code>gt(votes_mail_early %&gt;% select (district_number, district_description, ballots_received, ballots_sent, reject, accept_full) %&gt;% arrange(desc(ballots_received))) %&gt;% 
 data_color(
    columns = vars(ballots_received),
    colors = scales::col_numeric(
      palette = paletteer::paletteer_d(
        palette = &quot;ggsci::teal_material&quot;
        ) %&gt;% as.character(),
      domain = NULL
      )) %&gt;% 
   data_color(
    columns = vars(accept_full),
    colors = scales::col_numeric(
      palette = paletteer::paletteer_d(
        palette = &quot;ggsci::light_blue_material&quot;
        ) %&gt;% as.character(),
      domain = NULL
      )) %&gt;% 
    cols_label(
    district_number = &quot;District Number&quot;,
    district_description = &quot;District&quot;,
    ballots_received= &quot;Mail Ballots Received&quot;,
    ballots_sent = &quot;Mail Ballots Sent&quot;,
    reject = &quot;Mail Ballots Rejected&quot;,
    accept_full = &quot;Early Vote in Person&quot;
  ) %&gt;% opt_row_striping() %&gt;% tab_style( cell_text(weight = &quot;bold&quot;), locations = cells_column_labels(columns = vars(district_number, district_description, ballots_received, ballots_sent, reject, accept_full)))
</code></pre>

<p>I had the R script do a few system calls to push the data up to a github repository as well as commit the output html to the web.  Not sure if I recommend this.</p>

<pre><code>system_call &lt;- paste0(
  
  &quot;git add early_vote_md.html &quot; ,  &quot;data/output/&quot;,report_date,&quot;_&quot;,&quot;alaska_early_vote.csv
    git commit -m  \&quot;update \&quot; 
    git push origin master&quot;
  
)


system(system_call)

</code></pre>

<p>You can <a href="https://benmatheson.github.io/alaska_2020_early_absentee_vote/early_vote_md.html">check out the full website</a>.</p>

            </div>

            <div class="links">
                
                    &laquo; <a class="basic-alignment left" href="https://benmatheson.github.io/blog/covid_testing/">AnchorageCovidTesting.org Website</a>
                
                
                    <a class="basic-alignment left" href="https://benmatheson.github.io/blog/governor_oil/">Alaska Governors&#39; Wild Ride on Oil Prices</a> &raquo;
                
            </div>
        </section>
        <br>
        <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        (function() {
            
            
            if (window.location.hostname == "localhost")
                return;
            var disqus_shortname = '';
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view comments powered by <a href="http://disqus.com/?ref_noscript">Disqus</a>.</noscript>
</section>

    </section>

        </main>
        <footer class="row middle-xs center-xs">
            
            <div class="col-xs-3 col-md-2"><a href="https://github.com/benmatheson">GitHub</a></div>
            
            
            
            <div class="col-xs-3 col-md-2"><a href="https://twitter.com/benmatheson">Twitter</a></div>
            
            
            
            <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
            
            <script src="https://benmatheson.github.io/scripts/main.js" type="text/javascript"></script>
            
            <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
        </footer>
    </body>
</html>

