<!DOCTYPE html>
<html
  lang="en-US"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="false"
><head>
  <meta charset="utf-8" />
  
    <meta http-equiv="content-language" content="en-US" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Flying 1,000 Miles on The Iditarod Trail - Data Visualization and Map &middot; Ben Matheson</title>
    <meta name="title" content="Flying 1,000 Miles on The Iditarod Trail - Data Visualization and Map &middot; Ben Matheson" />
  
  
  
  
  
  <link rel="canonical" href="/posts/iditarod-zoom/" />
  
  
  
  
  
  
  
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.6011e7a76e6a02592fbc0fccff519c14bb90e4e8eb4510f43dea784baa71a6e9126cafb7523dca1593a33d54f0d26a1617460ee185d4b2258fa2fab51badb6a2.css"
    integrity="sha512-YBHnp25qAlkvvA/M/1GcFLuQ5OjrRRD0Pep4S6pxpukSbK&#43;3Uj3KFZOjPVTw0moWF0YO4YXUsiWPovq1G622og=="
  />
  
  
  <script type="text/javascript" src="/js/appearance.min.dbca9e2200cf929a23b55442f2ff09361b8d5290147ff1407f89ed3839f0fea13db4e94f5ae6bf2f3de10d322b4bede74b578455e9cc7d5565314d914602c974.js" integrity="sha512-28qeIgDPkpojtVRC8v8JNhuNUpAUf/FAf4ntODnw/qE9tOlPWua/Lz3hDTIrS&#43;3nS1eEVenMfVVlMU2RRgLJdA=="></script>
  
  
  
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:title" content="Flying 1,000 Miles on The Iditarod Trail - Data Visualization and Map" />
<meta property="og:description" content="When March arrives in Alaska, there are two things on everyone&rsquo;s mind:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/iditarod-zoom/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-03-29T22:05:17-08:00" />
<meta property="article:modified_time" content="2019-03-29T22:05:17-08:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Flying 1,000 Miles on The Iditarod Trail - Data Visualization and Map"/>
<meta name="twitter:description" content="When March arrives in Alaska, there are two things on everyone&rsquo;s mind:"/>

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "",
    "name": "Flying 1,000 Miles on The Iditarod Trail - Data Visualization and Map",
    "headline": "Flying 1,000 Miles on The Iditarod Trail - Data Visualization and Map",
    
    "abstract": "When March arrives in Alaska, there are two things on everyone\u0026rsquo;s mind:",
    "inLanguage": "en-US",
    "url" : "\/posts\/iditarod-zoom\/",
    "author" : {
      "@type": "Person",
      "name": "Ben Matheson"
    },
    "copyrightYear": "2019",
    "dateCreated": "2019-03-29T22:05:17-08:00",
    "datePublished": "2019-03-29T22:05:17-08:00",
    
    "dateModified": "2019-03-29T22:05:17-08:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "1165"
  }]
  </script>


  
  
  
  <meta name="author" content="Ben Matheson" />
  
    
      <link href="https://twitter.com/benmatheson" rel="me" />
    
  
  
  






  
  
  
  


  
  
</head>
<body
    class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0"
        href="#main-content"
        ><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400"
          >&darr;</span
        >Skip to main content</a
      >
    </div><header
  class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-900 dark:text-neutral"
>
  
  <div>
    
      <a
        class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
        rel="me"
        href="/"
        >Ben Matheson</a
      >
    

  </div>
  
  
    <nav>
      <ul class="flex flex-col list-none sm:flex-row">
        
          <li
            class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"
          >
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="/posts/"
              title=""
              >Writing</a
            >
          </li>
        
          <li
            class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"
          >
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="/projects/"
              title="Projects"
              >Projects</a
            >
          </li>
        
          <li
            class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"
          >
            <a
              class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
              href="/contact/"
              title="Contact"
              >Contact</a
            >
          </li>
        
        
      </ul>
    </nav>
  
</header>
<main id="main-content" class="relative grow">
  <article>
    <header class="max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Flying 1,000 Miles on The Iditarod Trail - Data Visualization and Map
      </h1>
      <div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400">
        





  
  



  

  
  

  

  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    

    
    
  </div>

  
  


      </div>
    </header>
    <section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert">
      
      <div class="min-w-0 min-h-0 max-w-prose">
        <p>When March arrives in Alaska, there are two things on everyone&rsquo;s mind:</p>
<ol>
<li>The sun is back (and out until 10 p.m.).</li>
<li>The Iditarod Trail Sled Dog Race is on.</li>
</ol>
<p>To celebrate this year, I built [a project] (<a href="https://benmatheson.github.io/irodzoom/">https://benmatheson.github.io/irodzoom/</a>) that fuses a map of high resolution satellite imagery with an enormous amount of checkpoint data and a few 3D effects. Ultimately a proof-of-concept that got far out of hand.</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/ezgif-3-c0a08646e1e0_hue47418d15647368848269c5089f30fe4_3249736_330x0_resize_box.gif 330w,
          /posts/iditarod-zoom/images/ezgif-3-c0a08646e1e0_hue47418d15647368848269c5089f30fe4_3249736_660x0_resize_box.gif 660w,
          /posts/iditarod-zoom/images/ezgif-3-c0a08646e1e0_hue47418d15647368848269c5089f30fe4_3249736_1024x0_resize_box.gif 1024w,
          /posts/iditarod-zoom/images/ezgif-3-c0a08646e1e0_hue47418d15647368848269c5089f30fe4_3249736_1320x0_resize_box.gif 2x"
        src="/posts/iditarod-zoom/images/ezgif-3-c0a08646e1e0_hue47418d15647368848269c5089f30fe4_3249736_660x0_resize_box.gif"
        alt="gif 2"
      />
      
    </figure>
  

</p>
<p>I have covered the race for Alaska <a href="https://itunes.apple.com/us/podcast/iditapod/id1204512892?mt=2">public radio</a> a couple times by travelling from checkpoint to checkpoint in a a small two-person airplane, a 50-year-old <a href="https://en.wikipedia.org/wiki/Piper_PA-18_Super_Cub">Piper Supercub.</a></p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/IMG_1500_huad4afdcd60f2877ab39b410503c707db_3413941_330x0_resize_q75_box.JPG 330w,
          /posts/iditarod-zoom/images/IMG_1500_huad4afdcd60f2877ab39b410503c707db_3413941_660x0_resize_q75_box.JPG 660w,
          /posts/iditarod-zoom/images/IMG_1500_huad4afdcd60f2877ab39b410503c707db_3413941_1024x0_resize_q75_box.JPG 1024w,
          /posts/iditarod-zoom/images/IMG_1500_huad4afdcd60f2877ab39b410503c707db_3413941_1320x0_resize_q75_box.JPG 2x"
        src="/posts/iditarod-zoom/images/IMG_1500_huad4afdcd60f2877ab39b410503c707db_3413941_660x0_resize_q75_box.JPG"
        alt="gif 1"
      />
      
    </figure>
  

</p>
<p>It flies low and slow enough that you see every wet creek crossing, moose hunkered down in willows, and a few of the millions of lakes in the state.</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/IMG_1262_hu1a24c4ef00ed9e2165309a7ce2b257b1_1582508_330x0_resize_q75_box.JPG 330w,
          /posts/iditarod-zoom/images/IMG_1262_hu1a24c4ef00ed9e2165309a7ce2b257b1_1582508_660x0_resize_q75_box.JPG 660w,
          /posts/iditarod-zoom/images/IMG_1262_hu1a24c4ef00ed9e2165309a7ce2b257b1_1582508_1024x0_resize_q75_box.JPG 1024w,
          /posts/iditarod-zoom/images/IMG_1262_hu1a24c4ef00ed9e2165309a7ce2b257b1_1582508_1320x0_resize_q75_box.JPG 2x"
        src="/posts/iditarod-zoom/images/IMG_1262_hu1a24c4ef00ed9e2165309a7ce2b257b1_1582508_660x0_resize_q75_box.JPG"
        alt="gif 1"
      />
      
    </figure>
  

</p>
<p>Inspired some by the Washington Post&rsquo;s superb <a href="https://www.washingtonpost.com/graphics/2018/national/us-mexico-border-flyover/?utm_term=.915bd937e601">Borderline</a> project, I wanted to replicate a small portion of the flight experience. It&rsquo;s hard to get anywhere on the trail, after it leaves the start, it&rsquo;s really only access by small airplane and snowmobile.</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/IMG_1769_huf0bacd4ccb14d169eb15412246e67947_433920_330x0_resize_q75_box.JPG 330w,
          /posts/iditarod-zoom/images/IMG_1769_huf0bacd4ccb14d169eb15412246e67947_433920_660x0_resize_q75_box.JPG 660w,
          /posts/iditarod-zoom/images/IMG_1769_huf0bacd4ccb14d169eb15412246e67947_433920_1024x0_resize_q75_box.JPG 1024w,
          /posts/iditarod-zoom/images/IMG_1769_huf0bacd4ccb14d169eb15412246e67947_433920_1320x0_resize_q75_box.JPG 2x"
        src="/posts/iditarod-zoom/images/IMG_1769_huf0bacd4ccb14d169eb15412246e67947_433920_660x0_resize_q75_box.JPG"
        alt="gif 1"
      />
      
    </figure>
  

</p>
<p>Mushing is a tough spectatory sport: due to the inacessiblility of the terrain, race fans spend money and many hours to obsessively follow the <a href="https://iditarod.com/gps/">GPS tracker</a> (myself included) during the race, the terrain and sharp beauty of Alaska’s snow-covered rivers, mountains, and frozen ocean doesn’t come through:</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/screenshots/gps_huc24ca16133dfd701505b957422ad45f0_626288_330x0_resize_box_3.png 330w,
          /posts/iditarod-zoom/images/screenshots/gps_huc24ca16133dfd701505b957422ad45f0_626288_660x0_resize_box_3.png 660w,
          /posts/iditarod-zoom/images/screenshots/gps_huc24ca16133dfd701505b957422ad45f0_626288_1024x0_resize_box_3.png 1024w,
          /posts/iditarod-zoom/images/screenshots/gps_huc24ca16133dfd701505b957422ad45f0_626288_1320x0_resize_box_3.png 2x"
        src="/posts/iditarod-zoom/images/screenshots/gps_huc24ca16133dfd701505b957422ad45f0_626288_660x0_resize_box_3.png"
        alt="gif 1"
      />
      
    </figure>
  

</p>
<p>I set out to get some of the gorgeous imagery and give a small taste of the beauty of the trail.</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/ezgif-2-3198e50deb64_hubf8de53ed98f08608226abdbba27b63c_2425542_330x0_resize_box.gif 330w,
          /posts/iditarod-zoom/images/ezgif-2-3198e50deb64_hubf8de53ed98f08608226abdbba27b63c_2425542_660x0_resize_box.gif 660w,
          /posts/iditarod-zoom/images/ezgif-2-3198e50deb64_hubf8de53ed98f08608226abdbba27b63c_2425542_1024x0_resize_box.gif 1024w,
          /posts/iditarod-zoom/images/ezgif-2-3198e50deb64_hubf8de53ed98f08608226abdbba27b63c_2425542_1320x0_resize_box.gif 2x"
        src="/posts/iditarod-zoom/images/ezgif-2-3198e50deb64_hubf8de53ed98f08608226abdbba27b63c_2425542_660x0_resize_box.gif"
        alt="gif 1"
      />
      
    </figure>
  

</p>
<p>The trail is as long as a trip from New York to Florida. The Alaska landscape transforms from steep mountains to the vast Yukon River to the barren Bering Sea coastline over the course of the race.</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/ezgif-2-5995c6c4584c_huaf7228f9431b9fe88a100c4f3bfeaf4b_1885895_330x0_resize_box.gif 330w,
          /posts/iditarod-zoom/images/ezgif-2-5995c6c4584c_huaf7228f9431b9fe88a100c4f3bfeaf4b_1885895_660x0_resize_box.gif 660w,
          /posts/iditarod-zoom/images/ezgif-2-5995c6c4584c_huaf7228f9431b9fe88a100c4f3bfeaf4b_1885895_1024x0_resize_box.gif 1024w,
          /posts/iditarod-zoom/images/ezgif-2-5995c6c4584c_huaf7228f9431b9fe88a100c4f3bfeaf4b_1885895_1320x0_resize_box.gif 2x"
        src="/posts/iditarod-zoom/images/ezgif-2-5995c6c4584c_huaf7228f9431b9fe88a100c4f3bfeaf4b_1885895_660x0_resize_box.gif"
        alt="gif 1"
      />
      
    </figure>
  

</p>
<p><strong>The basics:</strong></p>
<p>The Iditarod is sled dog race from Willow (near Anchorage) to Nome that takes 8-11 days or so. But it’s way more. I think of it as a 4-D game of chess across 1,000 miles of wilderness trails in which the cast of oddball mushers push themselves to the limit and go on an adventure with their 14 extremely smart and athletic dogs.</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/IMG_1607_huf4b7a6826d30d17ded438e6cb4068681_899616_330x0_resize_q75_box.JPG 330w,
          /posts/iditarod-zoom/images/IMG_1607_huf4b7a6826d30d17ded438e6cb4068681_899616_660x0_resize_q75_box.JPG 660w,
          /posts/iditarod-zoom/images/IMG_1607_huf4b7a6826d30d17ded438e6cb4068681_899616_1024x0_resize_q75_box.JPG 1024w,
          /posts/iditarod-zoom/images/IMG_1607_huf4b7a6826d30d17ded438e6cb4068681_899616_1320x0_resize_q75_box.JPG 2x"
        src="/posts/iditarod-zoom/images/IMG_1607_huf4b7a6826d30d17ded438e6cb4068681_899616_660x0_resize_q75_box.JPG"
        alt="gif 1"
      />
      
    </figure>
  

</p>
<p>It’s a celebration of history, rural communities, athleticism and outdoor travel. It makes for [good radio] (<a href="http://www.knom.org/wp/blog/author/bmatheson/">http://www.knom.org/wp/blog/author/bmatheson/</a>) (in my opinion) and gives me a space to play with rich spatial and performance data to hit that sweet spot in the venn diagram of  “fun things I really like”, and “doing interesting data and web work.”</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/IMG_1094_hu2579ed6adf6d291deadada313b89923f_231136_330x0_resize_q75_box.JPG 330w,
          /posts/iditarod-zoom/images/IMG_1094_hu2579ed6adf6d291deadada313b89923f_231136_660x0_resize_q75_box.JPG 660w,
          /posts/iditarod-zoom/images/IMG_1094_hu2579ed6adf6d291deadada313b89923f_231136_1024x0_resize_q75_box.JPG 1024w,
          /posts/iditarod-zoom/images/IMG_1094_hu2579ed6adf6d291deadada313b89923f_231136_1320x0_resize_q75_box.JPG 2x"
        src="/posts/iditarod-zoom/images/IMG_1094_hu2579ed6adf6d291deadada313b89923f_231136_660x0_resize_q75_box.JPG"
        alt="gif 1"
      />
      
    </figure>
  

</p>
<p><strong>The satellite images</strong></p>
<p>There is no prebaked web service of good winter imagery that I know of, so I made one. I downloaded dozens of Sentinel-2 images of the trail through the  <a href="https://apps.sentinel-hub.com/eo-browser/?lat=61.1732&amp;lng=-149.9389&amp;zoom=11">Sentinal Hub EO Browser</a>. To find cloud-free scenes, I found a period in 2017 that had a few nice days of clear skies and snagged the best scenes I could find. Most satellite depictions of Alaska involve summer imagery and I was very glad to show the winter scenes that the dog mushers experience (although rarely in such fine weather).</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/screenshots/downloadImages_hue0cbe0e154fda80f18d2c714cd63deff_1197213_330x0_resize_box_3.png 330w,
          /posts/iditarod-zoom/images/screenshots/downloadImages_hue0cbe0e154fda80f18d2c714cd63deff_1197213_660x0_resize_box_3.png 660w,
          /posts/iditarod-zoom/images/screenshots/downloadImages_hue0cbe0e154fda80f18d2c714cd63deff_1197213_1024x0_resize_box_3.png 1024w,
          /posts/iditarod-zoom/images/screenshots/downloadImages_hue0cbe0e154fda80f18d2c714cd63deff_1197213_1320x0_resize_box_3.png 2x"
        src="/posts/iditarod-zoom/images/screenshots/downloadImages_hue0cbe0e154fda80f18d2c714cd63deff_1197213_660x0_resize_box_3.png"
        alt="gif 1"
      />
      
    </figure>
  

</p>
<p>I stitched them together with gdal, creating a 650mb+ file. There surely is a better way, but this is how it came together for me.</p>
<pre tabindex="0"><code> gdal_merge.py --config CHECK_DISK_FREE_SPACE NO -co COMPRESS=DEFLATE -ul_lr 
 -18664504.8 9651906.9 -16615721.2 8650903.1 -o outSupplementTuesday.tiff 00001.tiff 
 00002.tiff 0001.tiff 0002.tiff 0003.tiff 0004.tiff 0005.tiff 0006.tiff 0007.tiff   
0008.tiff 0009.tiff 00010.tiff 00011.tiff 00012.tiff 001.tiff 002.tiff 003.tiff 
   004.tiff 1.tiff 2.tiff 3.tiff 4.tiff 5.tiff 6.tiff 7.tiff 8.tiff 9.tiff 10.tiff 
 11.tiff 12.tiff 13.tiff 14.tiff 15.tiff 16.tiff 17.tiff 18.tiff 19.tiff 20.tiff 21.tiff 22.tiff
</code></pre><p>I uploaded this massive raster to <a href="https://www.mapbox.com/mapbox-studio/">Mapbox Studio</a>.</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/screenshots/mb_hub393a1f07285ae4f8c25b40a8a1126d8_1059799_330x0_resize_box_3.png 330w,
          /posts/iditarod-zoom/images/screenshots/mb_hub393a1f07285ae4f8c25b40a8a1126d8_1059799_660x0_resize_box_3.png 660w,
          /posts/iditarod-zoom/images/screenshots/mb_hub393a1f07285ae4f8c25b40a8a1126d8_1059799_1024x0_resize_box_3.png 1024w,
          /posts/iditarod-zoom/images/screenshots/mb_hub393a1f07285ae4f8c25b40a8a1126d8_1059799_1320x0_resize_box_3.png 2x"
        src="/posts/iditarod-zoom/images/screenshots/mb_hub393a1f07285ae4f8c25b40a8a1126d8_1059799_660x0_resize_box_3.png"
        alt="gif 1"
      />
      
    </figure>
  

</p>
<p>Within MapBox Studio, I added a&hellip;somewhat accurate&hellip;line feature of the trail route (it changes a bit year-to-year) and the ~25 small village checkpoints. Mapbox then does the hard work of slicing the images and features into several tiles that load only when users need to see them. I then used Mapbox-gl’s <a href="https://docs.mapbox.com/mapbox-gl-js/example/flyto-options/">flyTo</a> feature liberally in combination with a pitch setting to give a more 3D view of the horizon instead of looking straight down at the ground.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">regFly</span>() {


    <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">flyTo</span>({<span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">newSumData</span>[<span style="color:#ae81ff">0</span>].<span style="color:#a6e22e">lon</span>,<span style="color:#a6e22e">newSumData</span>[<span style="color:#ae81ff">0</span>].<span style="color:#a6e22e">lat</span>],        
        <span style="color:#a6e22e">speed</span><span style="color:#f92672">:</span> .<span style="color:#ae81ff">1</span>, 
    <span style="color:#a6e22e">curve</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>, 
    <span style="color:#a6e22e">pitch</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">80</span>,
    <span style="color:#a6e22e">bearing</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">270</span>,
    <span style="color:#a6e22e">zoom</span><span style="color:#f92672">:</span><span style="color:#ae81ff">9.7</span>,
    <span style="color:#a6e22e">duration</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10000</span>})
}

</code></pre></div><p>I hooked up a couple buttons to manage the flying back and forth between checkpoints. But I wanted to have a few dashboard indicators of the race update as viewers progessed between checkpoints, so I went to snag the thousands of datapoints to illustrate it.</p>
<p><strong>The Race Data</strong></p>
<p>I scraped the Iditarod website’s many checkpoint <a href="https://iditarod.com/race/2018/checkpoints/9-Nikolai/">html tables</a> using <a href="https://rvest.tidyverse.org/">rvest</a> to build a database of each check-in and check-out time of all 67 mushers at all 25 checkpoints, along with the their run times, rest times, dog drops.</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/leader_huf78dc94d8f11c919ab18c617983e05cb_62490_330x0_resize_box_3.png 330w,
          /posts/iditarod-zoom/images/leader_huf78dc94d8f11c919ab18c617983e05cb_62490_660x0_resize_box_3.png 660w,
          /posts/iditarod-zoom/images/leader_huf78dc94d8f11c919ab18c617983e05cb_62490_1024x0_resize_box_3.png 1024w,
          /posts/iditarod-zoom/images/leader_huf78dc94d8f11c919ab18c617983e05cb_62490_1320x0_resize_box_3.png 2x"
        src="/posts/iditarod-zoom/images/leader_huf78dc94d8f11c919ab18c617983e05cb_62490_660x0_resize_box_3.png"
        alt="gif 1"
      />
      
    </figure>
  

</p>
<p>I was able to reuse..a bit..of code from my <a href="https://benmatheson.github.io/iditarod/">Iditarod visualization project</a> last year, but this was a somewhat lengthy process unto itself after parsing the different flavors of times/dates and reshaping the data a few ways. Here&rsquo;s one of the main scraping functions.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">readCheck <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(url) {
  
checkPage <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read_html</span>(url, handle <span style="color:#f92672">=</span> curl<span style="color:#f92672">::</span><span style="color:#a6e22e">new_handle</span>(<span style="color:#e6db74">&#34;useragent&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Mozilla/5.0&#34;</span>)) 
checkData <span style="color:#f92672">&lt;-</span> checkPage <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">html_nodes</span>(<span style="color:#e6db74">&#39;table&#39;</span>) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">html_table</span>(fill<span style="color:#f92672">=</span>T)
checkName <span style="color:#f92672">&lt;-</span> checkPage <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">html_nodes</span>(<span style="color:#e6db74">&#39;h1&#39;</span>) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">html_text</span>()
checkName <span style="color:#f92672">&lt;-</span> checkName[[3]]
checkDf <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.data.frame</span>(checkData)
<span style="color:#a6e22e">ifelse</span>(checkName <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Ophir&#34;</span>, <span style="color:#e6db74">&#34;Kaltag&#34;</span>), checkDf <span style="color:#f92672">&lt;-</span> checkDf[2<span style="color:#f92672">:</span><span style="color:#a6e22e">nrow</span>(checkDf) ,<span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">12</span>], checkDf <span style="color:#f92672">&lt;-</span> checkDf[2<span style="color:#f92672">:</span><span style="color:#a6e22e">nrow</span>(checkDf) ,<span style="color:#ae81ff">3</span><span style="color:#f92672">:</span><span style="color:#ae81ff">12</span>] )
<span style="color:#a6e22e">names</span>(checkDf) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;musher&#34;</span>, <span style="color:#e6db74">&#34;bib&#34;</span>,<span style="color:#e6db74">&#34;intime&#34;</span>,<span style="color:#e6db74">&#34;indogs&#34;</span>, <span style="color:#e6db74">&#34;outtime&#34;</span>, <span style="color:#e6db74">&#34;outdogs&#34;</span>, <span style="color:#e6db74">&#34;rest&#34;</span>, <span style="color:#e6db74">&#34;enroute&#34;</span>,<span style="color:#e6db74">&#34;prev&#34;</span>, <span style="color:#e6db74">&#34;speed&#34;</span>)
checkDf<span style="color:#f92672">$</span>checkName <span style="color:#f92672">&lt;-</span> checkName
<span style="color:#a6e22e">write_csv</span>(checkDf, <span style="color:#a6e22e">paste0</span>(<span style="color:#e6db74">&#34;outCsv/&#34;</span>,<span style="color:#a6e22e">Sys.time</span>(),<span style="color:#e6db74">&#34;1.csv&#34;</span>))
checkDf}




<span style="color:#75715e">###the full thing!!!</span>
full2018 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lapply</span>(urls, readCheck) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">bind_rows</span>()


</code></pre></div><p>(The major missing piece is the actual GPS data. Mushers frequently rest their teams by camping outside checkpoints, so this is only a partial representation of the strategy beneath the surface).</p>
<p>I used R and the dplyr set of tools to do things like clean up the messy dates using the wonderful lubridate set of tools, and generate a set of summary stats for each checkpoint. These went into a few of the sidebar elements.</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/ezgif-2-6ce03a987cd1_hu5d2d9cee3818964aa9cb86d960ed5786_653486_330x0_resize_box.gif 330w,
          /posts/iditarod-zoom/images/ezgif-2-6ce03a987cd1_hu5d2d9cee3818964aa9cb86d960ed5786_653486_660x0_resize_box.gif 660w,
          /posts/iditarod-zoom/images/ezgif-2-6ce03a987cd1_hu5d2d9cee3818964aa9cb86d960ed5786_653486_1024x0_resize_box.gif 1024w,
          /posts/iditarod-zoom/images/ezgif-2-6ce03a987cd1_hu5d2d9cee3818964aa9cb86d960ed5786_653486_1320x0_resize_box.gif 2x"
        src="/posts/iditarod-zoom/images/ezgif-2-6ce03a987cd1_hu5d2d9cee3818964aa9cb86d960ed5786_653486_660x0_resize_box.gif"
        alt="gif 1"
      />
      
    </figure>
  

</p>
<p><strong>The D3 + Charts</strong></p>
<p>I built a small dashboard looking at things like dropped dogs, run speeds, strategic breaks, and correlation between checkpoint place and final place. My vision was to have the charts update smoothly as the viewer flies between checkpoints and I need to push my D3 skills a bit to join and rejoin the data ~25 times throughout the fly-through experience.</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/ezgif-3-c0a08646e1e0_hue47418d15647368848269c5089f30fe4_3249736_330x0_resize_box.gif 330w,
          /posts/iditarod-zoom/images/ezgif-3-c0a08646e1e0_hue47418d15647368848269c5089f30fe4_3249736_660x0_resize_box.gif 660w,
          /posts/iditarod-zoom/images/ezgif-3-c0a08646e1e0_hue47418d15647368848269c5089f30fe4_3249736_1024x0_resize_box.gif 1024w,
          /posts/iditarod-zoom/images/ezgif-3-c0a08646e1e0_hue47418d15647368848269c5089f30fe4_3249736_1320x0_resize_box.gif 2x"
        src="/posts/iditarod-zoom/images/ezgif-3-c0a08646e1e0_hue47418d15647368848269c5089f30fe4_3249736_660x0_resize_box.gif"
        alt="gif 2"
      />
      
    </figure>
  

</p>
<p>It’s inspired by augmented reality (and I did experiment with a more futuristic transparent design), but it was never quite there.</p>
<p>



  
    <figure>
      <img
        class="my-0 rounded-md"
        srcset="
          /posts/iditarod-zoom/images/screenshots/ezgif-2-c373b7202240_huf9876c1ec27effdcbfe51a757b3e2108_783472_330x0_resize_box.gif 330w,
          /posts/iditarod-zoom/images/screenshots/ezgif-2-c373b7202240_huf9876c1ec27effdcbfe51a757b3e2108_783472_660x0_resize_box.gif 660w,
          /posts/iditarod-zoom/images/screenshots/ezgif-2-c373b7202240_huf9876c1ec27effdcbfe51a757b3e2108_783472_1024x0_resize_box.gif 1024w,
          /posts/iditarod-zoom/images/screenshots/ezgif-2-c373b7202240_huf9876c1ec27effdcbfe51a757b3e2108_783472_1320x0_resize_box.gif 2x"
        src="/posts/iditarod-zoom/images/screenshots/ezgif-2-c373b7202240_huf9876c1ec27effdcbfe51a757b3e2108_783472_660x0_resize_box.gif"
        alt="gif 2"
      />
      
    </figure>
  

</p>
<p>It was D3’s update feature that makes the transitions fun. Each circle is tied to an individual racer by using D3’s key function. When the user presses the next key, it runs a function that updates the data that is joined to each SVG (or html) element and transitions it over a portion of a second. There are 25 or so data joins in this way of doing things. I ended up on the <a href="https://bost.ocks.org/mike/join/">same 2012 article</a> by Mike Bostock that I&rsquo;ve surely read 100 times by now.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#75715e">//UPDATED SCATTER 
</span><span style="color:#75715e"></span>

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">scat</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">select</span>(<span style="color:#e6db74">&#39;#right2&#39;</span>).<span style="color:#a6e22e">selectAll</span>(<span style="color:#e6db74">&#39;g&#39;</span>)

   <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">c1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">scatterSvgG</span>.<span style="color:#a6e22e">selectAll</span>(<span style="color:#e6db74">&#39;circle&#39;</span>).<span style="color:#a6e22e">data</span>(<span style="color:#a6e22e">newCpData</span>, <span style="color:#a6e22e">d</span>=&gt; <span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">bib</span>)
   <span style="color:#a6e22e">c1</span>.<span style="color:#a6e22e">exit</span>().<span style="color:#a6e22e">remove</span>()


   <span style="color:#a6e22e">c1</span>.<span style="color:#a6e22e">transition</span>()
    .<span style="color:#a6e22e">duration</span>(<span style="color:#ae81ff">2000</span>)
    .<span style="color:#a6e22e">ease</span>(<span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">easeExp</span>) 
   .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#34;cx&#34;</span>, <span style="color:#a6e22e">d</span>=&gt;<span style="color:#a6e22e">scatterXScale</span>(<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">cpOrder</span>))
   .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#34;cy&#34;</span>, <span style="color:#a6e22e">d</span>=&gt;<span style="color:#a6e22e">scatterYScale</span>(<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">finalOrder</span>))
</code></pre></div><p>It&rsquo;s most certainly designed for desktop (might be a painful experience on any mobile device), but please enjoy [the final product!] (<a href="https://benmatheson.github.io/irodzoom/)">https://benmatheson.github.io/irodzoom/)</a>. And stay tuned for a different visualization of the 2019 data.</p>

      </div>
    </section>
    <footer class="pt-8 max-w-prose">
      

      

      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group" href="/posts/federal_contracts/">
              <span
                class="mr-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Beltway Billions Data Visualization</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="flex text-right group" href="/posts/pfdincome/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >For All Generations of Alaskans: How Sustainable is the Statutory Alaska Permanent Fund Dividend?</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                </span>
              </span>
              <span
                class="ml-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


    </footer>
    
  </article>

      
        <div
          class="absolute top-[110vh] ltr:right-0 rtl:left-0 w-12 pointer-events-none bottom-[-5.5rem]"
        >
          <a
            href="#the-top"
            class="w-12 h-12 sticky pointer-events-auto top-[calc(100vh-5rem)] bg-neutral/50 dark:bg-neutral-800/50 backdrop-blur rounded-full text-xl flex items-center justify-center text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400"
            aria-label="Scroll to top"
            title="Scroll to top"
          >
            &uarr;
          </a>
        </div>
      
    </main>
    <footer class="py-10">
  
  
  <div class="flex justify-between">
    <div>
      
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          &copy;
          2022
          Ben Matheson
      </p>
      
      
    </div>
    
    
  </div>
  
  
</footer>
</body>
</html>
